(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{35:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){"use strict";c.r(t);var s=c(24),a=c(6),n=(c(33),c(34),c(3)),r=c(9),l=c.n(r),i=(c(35),c(1)),o=function(){return Object(i.jsx)("h1",{className:"title",children:"Home Page"})},j=c(8),d=c(5),b=c(0),h=(c(37),function(){return Object(i.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(i.jsx)("div",{className:"Loader__content"})})}),u=function(e){var t=e.person;return Object(i.jsx)(a.b,{to:"../".concat(null===t||void 0===t?void 0:t.slug),className:l()({"has-text-danger":"f"===(null===t||void 0===t?void 0:t.sex)}),children:null===t||void 0===t?void 0:t.name})},x=function(e){var t=e.people,c=Object(n.q)().slug,s=function(e){return null===t||void 0===t?void 0:t.find((function(t){return t.name===e}))},r=Object(a.d)(),o=Object(d.a)(r,1)[0],j=o.get("sort")||"",b=o.get("order")||"",h=function(e){var t=new URLSearchParams(o);return j!==e?(t.set("sort",e),t.toString()):j===e&&"desc"===b?(t.delete("sort"),t.delete("order"),t.toString()):(t.set("sort",e),t.set("order","desc"),t.toString())};return Object(i.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(i.jsx)("thead",{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{children:Object(i.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Name",Object(i.jsx)(a.b,{to:{search:h("name")},children:Object(i.jsx)("span",{className:"icon",children:Object(i.jsx)("i",{className:l()("fas",{"fa-sort":"name"!==j,"fa-sort-down":"name"===j&&"desc"===b,"fa-sort-up":"name"===j&&"desc"!==b})})})})]})}),Object(i.jsx)("th",{children:Object(i.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Sex",Object(i.jsx)(a.b,{to:{search:h("sex")},children:Object(i.jsx)("span",{className:"icon",children:Object(i.jsx)("i",{className:l()("fas",{"fa-sort":"sex"!==j,"fa-sort-down":"sex"===j&&"desc"===b,"fa-sort-up":"sex"===j&&"desc"!==b})})})})]})}),Object(i.jsx)("th",{children:Object(i.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Born",Object(i.jsx)(a.b,{to:{search:h("born")},children:Object(i.jsx)("span",{className:"icon",children:Object(i.jsx)("i",{className:l()("fas",{"fa-sort":"born"!==j,"fa-sort-down":"born"===j&&"desc"===b,"fa-sort-up":"born"===j&&"desc"!==b})})})})]})}),Object(i.jsx)("th",{children:Object(i.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Died",Object(i.jsx)(a.b,{to:{search:h("died")},children:Object(i.jsx)("span",{className:"icon",children:Object(i.jsx)("i",{className:l()("fas",{"fa-sort":"died"!==j,"fa-sort-down":"died"===j&&"desc"===b,"fa-sort-up":"died"===j&&"desc"!==b})})})})]})}),Object(i.jsx)("th",{children:"Mother"}),Object(i.jsx)("th",{children:"Father"})]})}),Object(i.jsx)("tbody",{children:null===t||void 0===t?void 0:t.map((function(e){var t=e.slug===c;return Object(i.jsxs)("tr",{"data-cy":"person",className:l()({"has-background-warning":t}),children:[Object(i.jsx)("td",{children:Object(i.jsx)(u,{person:e})}),Object(i.jsx)("td",{children:e.sex}),Object(i.jsx)("td",{children:e.born}),Object(i.jsx)("td",{children:e.died}),Object(i.jsx)("td",{children:s(e.motherName)?Object(i.jsx)(u,{person:s(e.motherName)}):Object(i.jsx)("p",{children:e.motherName||"-"})}),Object(i.jsx)("td",{children:s(e.fatherName)?Object(i.jsx)(u,{person:s(e.fatherName)}):Object(i.jsx)("p",{children:e.fatherName||"-"})})]},e.slug)}))})]})},O=c(4),m=c(7),f="https://mate-academy.github.io/react_people-table/api/people.json";function p(e){return new Promise((function(t){return setTimeout(t,e)}))}function v(){return(v=Object(m.a)(Object(O.a)().mark((function e(){return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p(500).then((function(){return fetch(f)})).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=function(){return Object(i.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"})},g=function(){return Object(i.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:"Something went wrong"})},w=function(){var e=Object(a.d)(),t=Object(d.a)(e,2),c=t[0],s=t[1],n=c.get("query")||"",r=c.get("sex")||"all",o=c.getAll("centuries")||[],b=function(e){var t=new URLSearchParams(c);return t.set("sex",e),"all"===e&&t.delete("sex"),t.toString()},h=function(e){var t=new URLSearchParams(c),s=o.includes(e.toString())?o.filter((function(t){return t!==e.toString()})):[].concat(Object(j.a)(o),[e]);return t.delete("centuries"),""!==e&&s.forEach((function(e){return t.append("centuries",e.toString())})),t.toString()};return Object(i.jsxs)("nav",{className:"panel",children:[Object(i.jsx)("p",{className:"panel-heading",children:"Filters"}),Object(i.jsxs)("p",{className:"panel-tabs","data-cy":"SexFilter",children:[Object(i.jsx)(a.b,{className:l()({"is-active":"all"===r}),to:{search:b("all")},children:"All"}),Object(i.jsx)(a.b,{className:l()({"is-active":"m"===r}),to:{search:b("m")},children:"Male"}),Object(i.jsx)(a.b,{className:l()({"is-active":"f"===r}),to:{search:b("f")},children:"Female"})]}),Object(i.jsx)("div",{className:"panel-block",children:Object(i.jsxs)("p",{className:"control has-icons-left",children:[Object(i.jsx)("input",{"data-cy":"NameFilter",value:n,type:"search",className:"input",placeholder:"Search",onChange:function(e){return function(e){var t=new URLSearchParams(c);t.set("query",e);var a=e;s(t),a||(t.delete("query"),s(t))}(e.target.value)}}),Object(i.jsx)("span",{className:"icon is-left",children:Object(i.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})}),Object(i.jsx)("div",{className:"panel-block",children:Object(i.jsxs)("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:[Object(i.jsx)("div",{className:"level-left",children:[16,17,18,19,20].map((function(e){return Object(i.jsx)(a.b,{to:{search:h(e.toString())},"data-cy":"century",className:l()("button mr-1",{"is-info":o.includes(e.toString())}),children:e},e)}))}),Object(i.jsx)("div",{className:"level-right ml-4",children:Object(i.jsx)(a.b,{"data-cy":"centuryALL",className:l()("button is-success",{"is-outlined":o.length}),to:{search:h("")},children:"All"})})]})}),Object(i.jsx)("div",{className:"panel-block",children:Object(i.jsx)(a.b,{className:"button is-link is-outlined is-fullwidth",to:{search:function(){var e=new URLSearchParams(c);return e.delete("sex"),e.delete("centuries"),e.delete("query"),e.toString()}()},children:"Reset all filters"})})]})},y=function(){var e=Object(b.useState)(!0),t=Object(d.a)(e,2),c=t[0],s=t[1],n=Object(b.useState)([]),r=Object(d.a)(n,2),l=r[0],o=r[1],u=Object(b.useState)(!1),O=Object(d.a)(u,2),m=O[0],f=O[1],p=Object(a.d)(),y=Object(d.a)(p,1)[0],S=y.getAll("centuries")||[],L=y.get("sex")||"all",k=y.get("query")||"",P=y.get("sort")||"",C=y.get("order")||"";Object(b.useEffect)((function(){s(!0),function(){return v.apply(this,arguments)}().then((function(e){o(e),f(!1)})).catch((function(){return f(!0)})).finally((function(){return s(!1)}))}),[]);var F=function(){var e=Object(j.a)(l);if(S.length&&(e=e.filter((function(e){return S.includes(Math.ceil(e.born/100).toString())}))),"all"!==L&&(e=e.filter((function(e){return e.sex===L}))),k){var t=k.toLocaleLowerCase().trim();e=e.filter((function(e){var c,s;return e.name.toLocaleLowerCase().includes(t)||(null===(c=e.fatherName)||void 0===c?void 0:c.toLocaleLowerCase().includes(t))||(null===(s=e.motherName)||void 0===s?void 0:s.toLocaleLowerCase().includes(t))}))}if(P)switch(P){case"name":case"sex":e=e.sort((function(e,t){return"desc"===C?t[P].localeCompare(e[P]):e[P].localeCompare(t[P])}));break;case"born":case"died":e=e.sort((function(e,t){return"desc"===C?t[P]-e[P]:e[P]-t[P]}))}return e}();return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h1",{className:"title",children:"People Page"}),Object(i.jsx)("div",{className:"block",children:Object(i.jsxs)("div",{className:"columns is-desktop is-flex-direction-row-reverse",children:[Object(i.jsx)("div",{className:"column is-7-tablet is-narrow-desktop",children:!c&&Object(i.jsx)(w,{})}),Object(i.jsx)("div",{className:"column",children:Object(i.jsxs)("div",{className:"box table-container",children:[c&&Object(i.jsx)(h,{}),0===(null===l||void 0===l?void 0:l.length)&&!1===m&&!c&&Object(i.jsx)(N,{}),m&&Object(i.jsx)(g,{}),!1===m&&0!==(null===l||void 0===l?void 0:l.length)&&!c&&Object(i.jsx)(x,{people:F})]})})]})})]})},S=function(){return Object(i.jsx)("h1",{className:"title",children:"Page not found"})},L=function(){var e=function(e){var t=e.isActive;return l()("navbar-item",{"has-background-grey-lighter":t})};return Object(i.jsxs)("div",{"data-cy":"app",children:[Object(i.jsx)("nav",{"data-cy":"nav",className:"navbar is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(i.jsx)("div",{className:"container",children:Object(i.jsxs)("div",{className:"navbar-brand",children:[Object(i.jsx)(a.c,{to:"/",className:e,children:"Home"}),Object(i.jsx)(a.c,{to:"/people",className:e,children:"People"})]})})}),Object(i.jsx)("main",{className:"section",children:Object(i.jsx)("div",{className:"container",children:Object(i.jsxs)(n.d,{children:[Object(i.jsx)(n.b,{path:"/",element:Object(i.jsx)(o,{})}),Object(i.jsx)(n.b,{path:"/home",element:Object(i.jsx)(n.a,{to:"/",replace:!0})}),Object(i.jsx)(n.b,{path:"people",children:Object(i.jsx)(n.b,{path:":slug?",element:Object(i.jsx)(y,{})})}),Object(i.jsx)(n.b,{path:"*",element:Object(i.jsx)(S,{})})]})})})]})};Object(s.createRoot)(document.getElementById("root")).render(Object(i.jsx)(a.a,{children:Object(i.jsx)(L,{})}))}},[[38,1,2]]]);
//# sourceMappingURL=main.1b865616.chunk.js.map